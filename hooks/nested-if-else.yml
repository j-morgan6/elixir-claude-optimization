---
name: nested-if-else
description: Warn when nested if/else statements are used instead of pattern matching
action: warn
patterns:
  - regex: '(if\s+.+\s+do\s+.*if\s+.+\s+do)|(else\s+if\s+)'
    message: |
      Consider using pattern matching or case statements instead of nested if/else.

      Pattern matching is more idiomatic in Elixir:

      Instead of:
        if x == :ok do
          if y > 0 do
            :success
          else
            :invalid
          end
        else
          :error
        end

      Prefer:
        case {x, y > 0} do
          {:ok, true} -> :success
          {:ok, false} -> :invalid
          _ -> :error
        end

      Or use multiple function heads with guards.
